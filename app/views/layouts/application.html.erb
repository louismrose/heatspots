<!DOCTYPE html>
<html>
<head>
  <title>Heatspots</title>
  <%= stylesheet_link_tag :all %>
  <%= csrf_meta_tag %>
  
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
  <style type="text/css">
    html { height: 100% }
    body { height: 100%; margin: 0; padding: 0 }
    #map_canvas { height: 100% }
  </style>
  <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?sensor=false">
  </script>
  <script type="text/javascript" src="http://www.heatmapapi.com/Javascript/HeatmapAPIGoogle3.js"></script>
  <script type="text/javascript" src="http://www.heatmapapi.com/Javascript/HeatMapAPI3.aspx?k=0e900afd-114b-4fb4-a76b-3b9473dcf5ec"></script>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
  
  <script type="text/javascript">
  var myHeatmap = new GEOHeatmap();
  var myData = null;
  $(function() {
  // create data
  myData = new Array();
  for (p = 0; p < 50; p++) {
   var rLatD = Math.floor(Math.random() * 1000);
   var rLonD = Math.floor(Math.random() * 1000);
   var rValD = Math.floor(Math.random() * 10);

   myData.push(53.29 + (rLatD / 15000));
   myData.push(-1.52 + (rLonD / 15000));
   myData.push(rValD);
  }

  // configure HeatMapAPI
  myHeatmap.Init(400, 300); // set at pixels for your map
  myHeatmap.SetBoost(0.8);
  myHeatmap.SetDecay(0); // see documentation
  myHeatmap.SetData(myData);
//  myHeatmap.SetProxyURL('http://www.yourwebsite.com/proxy.php');

  // set up Google map, pass in the heatmap function
  var myLatlng = new google.maps.LatLng(53.29, -1.52);
  var myOptions = {
   zoom: 11,
   center: myLatlng,
   mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
  google.maps.event.addListener(map, 'idle', function(event) {
   myHeatmap.AddOverlay(this, myHeatmap);
  });
  });
  </script>
</head>
<body>

<%= yield %>

</body>
</html>
